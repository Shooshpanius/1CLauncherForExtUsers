<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:_1CLauncher.ViewModels"
        xmlns:controls="using:Avalonia.Controls"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="_1CLauncher.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/1c.ico"
        Title="_1CLauncher"
        SizeToContent="WidthAndHeight"
        Padding="12"
        MinWidth="320">

    <Design.DataContext>
        <!-- This only sets the DataContext for the previewer in an IDE,
             to set the actual DataContext for runtime, set the DataContext property in code (look at App.axaml.cs) -->
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Width="300" Spacing="8">
        <TextBlock Text="Login" FontSize="18" HorizontalAlignment="Center" />

        <TextBox Watermark="Username" Text="{Binding Username, Mode=TwoWay}" HorizontalAlignment="Stretch" />
        <TextBox Watermark="Password" Text="{Binding Password, Mode=TwoWay}" HorizontalAlignment="Stretch" PasswordChar="*" />
        <TextBox Watermark="Domain" Text="{Binding Domain, Mode=TwoWay}" HorizontalAlignment="Stretch" />

        <TextBlock Margin="0 5">Infobase:</TextBlock>
        <ComboBox ItemsSource="{Binding Bases}" SelectedItem="{Binding SelectedBase, Mode=TwoWay}" HorizontalAlignment="Stretch" />

        <TextBlock Margin="0 3">Connect:</TextBlock>
        <TextBox Text="{Binding ConnectionString, Mode=OneWay}" IsReadOnly="True" IsTabStop="False" Focusable="False" TextWrapping="Wrap" HorizontalAlignment="Stretch" />

        <!-- Platform selection -->
        <TextBlock Margin="0 5">Platform:</TextBlock>
        <StackPanel Orientation="Horizontal" Spacing="6">
            <ComboBox ItemsSource="{Binding Platforms}" SelectedItem="{Binding SelectedPlatform, Mode=TwoWay}" HorizontalAlignment="Stretch" Width="160" />
            <Button Content="Browse..." Click="BrowsePlatform_Click" Width="60" />
            <Button Content="Refresh" Click="RefreshPlatforms_Click" Width="60" />
        </StackPanel>
        <TextBox Text="{Binding PlatformPath, Mode=OneWay}" IsReadOnly="True" IsTabStop="False" Focusable="False" TextWrapping="Wrap" HorizontalAlignment="Stretch" />

        <!-- 1C-style button with icon from Assets/1c.ico -->
        <Button Command="{Binding LaunchCommand}" HorizontalAlignment="Stretch" Padding="6" Margin="0 4" BorderThickness="1" BorderBrush="#FFBFBFBF" Background="#FFF5F5F5">
            <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                <Image Source="avares://1CLauncher/Assets/1c.ico" Width="20" Height="20" />
                <TextBlock Text="1C:Предприятие" VerticalAlignment="Center" FontSize="14" />
            </StackPanel>
        </Button>

        <TextBlock Text="{Binding StatusMessage}" Foreground="Gray" FontSize="12" TextWrapping="Wrap" />
    </StackPanel>

</Window>
